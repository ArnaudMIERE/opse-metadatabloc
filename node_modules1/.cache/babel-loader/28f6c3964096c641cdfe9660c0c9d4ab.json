{"remainingRequest":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/babel-loader/lib/index.js!/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/src/lib/modules/opse-thumbnails-displayed-block/opse-thumbnails-displayed-block.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/src/lib/modules/opse-thumbnails-displayed-block/opse-thumbnails-displayed-block.vue","mtime":1644939828787},{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/babel.config.js","mtime":1644331050195},{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBhcHBseVByaW1hcnlBbmRTZWNvbmRhcnlDb2xvcnMgfSBmcm9tICIuLi8uLi91dGlscyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAib3BzZS10aHVtYm5haWxzLWRpc3BsYXllZC1ibG9jayIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRhdGFQb2xpY3k6IGZhbHNlLAogICAgICB5ZWFyczogW10sCiAgICAgIHBhcmFtczogW10sCiAgICAgIHNlbGVjdGVkWWVhcnM6IFtdLAogICAgICBzZWxlY3RlZFBhcmFtczogW10sCiAgICAgIGN1cnJlbnRTdGF0dXM6ICJQUkVQQVJJTkdfUkVRVUVTVCIsCiAgICAgIHVybDogbnVsbCwKICAgICAgdXJsczogW10sCiAgICAgIHBhZ2U6IDEsCiAgICAgIGl0ZW1zUGFnZXM6IFtdLAogICAgICBpdGVtc05hbWVQYWdlczogW10sCiAgICAgIGZvbGRlckZpbGU6ICIvdGh1bWJuYWlscy90aWZmL1JHQiIsCiAgICAgIGl0ZW1zOiBbXSwKICAgICAgaXRlbXNOYW1lOiBbXSwKICAgICAgbGlzdENvdW50OiAwLAogICAgICBwYWdlU2l6ZTogNAogICAgfTsKICB9LAogIHByb3BzOiB7CiAgICBsYW5ndWFnZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICJlbiIKICAgIH0sCiAgICB0aGVtZTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBwcmltYXJ5Q29sb3I6ICIjRjM5QzEyIiwKICAgICAgICAgIHNlY29uZGFyeUNvbG9yOiAiI0FBQSIKICAgICAgICB9OwogICAgICB9CiAgICB9LAogICAgbWV0YWRhdGE6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBhcHBseVRoZW1lOiBmdW5jdGlvbiBhcHBseVRoZW1lKCkgewogICAgICByZXR1cm4gYXBwbHlQcmltYXJ5QW5kU2Vjb25kYXJ5Q29sb3JzKHRoaXMudGhlbWUpOwogICAgfSwKICAgIGlzVmlzaWJsZTogZnVuY3Rpb24gaXNWaXNpYmxlKCkgewogICAgICB2YXIgaXNWaXNpYmxlID0gZmFsc2U7CgogICAgICBpZiAodGhpcy51cmwgIT0gbnVsbCkgewogICAgICAgIGlzVmlzaWJsZSA9IHRydWU7CiAgICAgIH0KCiAgICAgIHRoaXMuJGVtaXQoImdldFZpc2liaWxpdHkiLCB7CiAgICAgICAgbmFtZTogdGhpcy4kb3B0aW9ucy5uYW1lLAogICAgICAgIHByb2dyYW1tYXRpY1Njcm9sbGluZ1RpdGxlOiB0aGlzLiR0KCJvcHNlRG93bmxvYWQiKSwKICAgICAgICBpc1Zpc2libGU6IGlzVmlzaWJsZQogICAgICB9KTsKICAgICAgcmV0dXJuIGlzVmlzaWJsZTsKICAgIH0sCiAgICBkb3dubG9hZEFsbG93ZWQ6IGZ1bmN0aW9uIGRvd25sb2FkQWxsb3dlZCgpIHsKICAgICAgaWYgKHRoaXMueWVhcnMgJiYgdGhpcy55ZWFycy5sZW5ndGggPiAwIHx8IHRoaXMuaXRlbXMpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIHBhZ2VzOiBmdW5jdGlvbiBwYWdlcygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmIChfdGhpcy5wYWdlU2l6ZSA9PSBudWxsIHx8IF90aGlzLmxpc3RDb3VudCA9PSBudWxsKSByZXR1cm4gMDsKICAgICAgcmV0dXJuIE1hdGguY2VpbChfdGhpcy5saXN0Q291bnQgLyBfdGhpcy5wYWdlU2l6ZSk7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgbWV0YWRhdGE6IGZ1bmN0aW9uIG1ldGFkYXRhKCkgewogICAgICB0aGlzLmxvYWRJbWFnZSgpOwogICAgfSwKICAgIGxhbmd1YWdlOiBmdW5jdGlvbiBsYW5ndWFnZSh2YWx1ZSkgewogICAgICB0aGlzLiRpMThuLmxvY2FsZSA9IHZhbHVlOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuJGkxOG4ubG9jYWxlID0gdGhpcy5sYW5ndWFnZTsgLy90aGlzLmxvYWRJbWFnZSgpCgogICAgdGhpcy5maWxlKCk7CiAgICB0aGlzLmluaXRQYWdlKCk7CiAgICB0aGlzLnVwZGF0ZVBhZ2UodGhpcy5wYWdlKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGZpbGU6IGZ1bmN0aW9uIGZpbGUoKSB7CiAgICAgIHRoaXMubG9hZEltYWdlKHRoaXMuZm9sZGVyRmlsZSk7CiAgICB9LAogICAgaW5pdFBhZ2U6IGZ1bmN0aW9uIGluaXRQYWdlKCkgewogICAgICB0aGlzLmxpc3RDb3VudCA9IHRoaXMuaXRlbXMubGVuZ3RoOwoKICAgICAgaWYgKHRoaXMubGlzdENvdW50IDwgdGhpcy5wYWdlU2l6ZSkgewogICAgICAgIHRoaXMuaXRlbXNQYWdlcyA9IHRoaXMuaXRlbXM7CiAgICAgICAgdGhpcy5pdGVtc05hbWVQYWdlcyA9IHRoaXMuaXRlbXNOYW1lOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXRlbXNQYWdlcyA9IHRoaXMuaXRlbXMuc2xpY2UoMCwgdGhpcy5wYWdlU2l6ZSk7CiAgICAgICAgdGhpcy5pdGVtc05hbWVQYWdlcyA9IHRoaXMuaXRlbXNOYW1lLnNsaWNlKDAsIHRoaXMucGFnZVNpemUpOwogICAgICB9CiAgICB9LAogICAgdXBkYXRlUGFnZTogZnVuY3Rpb24gdXBkYXRlUGFnZShwYWdlSW5kZXgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBfc3RhcnQgPSAocGFnZUluZGV4IC0gMSkgKiBfdGhpcy5wYWdlU2l6ZTsKCiAgICAgIHZhciBfZW5kID0gcGFnZUluZGV4ICogX3RoaXMucGFnZVNpemU7CgogICAgICBfdGhpcy5pdGVtc1BhZ2VzID0gX3RoaXMuaXRlbXMuc2xpY2UoX3N0YXJ0LCBfZW5kKTsKICAgICAgX3RoaXMuaXRlbXNOYW1lUGFnZXMgPSBfdGhpcy5pdGVtc05hbWUuc2xpY2UoX3N0YXJ0LCBfZW5kKTsKICAgICAgX3RoaXMucGFnZSA9IHBhZ2VJbmRleDsKICAgIH0sCiAgICBkb3dubG9hZDogZnVuY3Rpb24gZG93bmxvYWQodXJsKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5jdXJyZW50U3RhdHVzID0gIlBSRVBBUklOR19SRVFVRVNUIjsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB0aGlzLmRvd25sb2FkRGlhbG9nID0gdHJ1ZTsKICAgICAgdGhpcy5heGlvcyh7CiAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICB1cmw6IHVybAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHNlbGYucmVxdWVzdElkID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAvKnNlbGYuY2hlY2tlciA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgIHNlbGYuY2hlY2tEb3dubG9hZChzZWxmLm1ldGFkYXRhLmlkLHNlbGYucmVxdWVzdElkKTsKICAgICAgICAgfSwgNTAwMCk7Ki8KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgLy8gZGVidWdnZXIKICAgICAgICAvL3NlbGYuY2xlYXJDaGVja2VyKCk7CiAgICAgICAgc2VsZi5kaXNwbGF5RXJyb3IoIkFuIGVycm9yIGhhcyBvY2N1cmVkOiIgKyBlcnJvcik7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIubG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBkb3dubG9hZEFsbDogZnVuY3Rpb24gZG93bmxvYWRBbGwoaW5kZXgpIHsKICAgICAgLy90aGlzLmRvd25sb2FkKHRoaXMudXJsKyJkb3dubG9hZD9jb2xsZWN0aW9uSWQ9Iit0aGlzLm1ldGFkYXRhLmlkKQogICAgICB3aW5kb3cub3Blbih0aGlzLnVybCArICJkYXRhL3YxXzAvZG93bmxvYWQ/Y29sbGVjdGlvbklkPSIgKyB0aGlzLm1ldGFkYXRhLmlkICsgIiZmb2xkZXI9IiArIGluZGV4KTsKICAgIH0sCiAgICBkb3dubG9hZEltYWdlOiBmdW5jdGlvbiBkb3dubG9hZEltYWdlKGluZGV4KSB7CiAgICAgIC8vdGhpcy5kb3dubG9hZCh0aGlzLnVybCsiZG93bmxvYWQ/Y29sbGVjdGlvbklkPSIrdGhpcy5tZXRhZGF0YS5pZCkKICAgICAgd2luZG93Lm9wZW4odGhpcy51cmwgKyAiZGF0YS92MV8wL2Rvd25sb2FkSW1nP2NvbGxlY3Rpb25JZD0iICsgdGhpcy5tZXRhZGF0YS5pZCArICImaW1hZ2U9IiArIGluZGV4KTsKICAgIH0sCiAgICBkb3dubG9hZFNlbGVjdGVkOiBmdW5jdGlvbiBkb3dubG9hZFNlbGVjdGVkKGluZGV4KSB7CiAgICAgIHdpbmRvdy5vcGVuKHRoaXMudXJsICsgImRhdGEvdjFfMC9kb3dubG9hZFllYXI/Y29sbGVjdGlvbklkPSIgKyB0aGlzLm1ldGFkYXRhLmlkICsgIiZmb2xkZXI9IiArIGluZGV4ICsgIiZmaWx0ZXI9eWVhcl9fXyIgKyB0aGlzLnNlbGVjdGVkWWVhcnMuam9pbigiX19fIikgKyAiX19fX3BhcmFtZXRlcl9fXyIgKyB0aGlzLnNlbGVjdGVkUGFyYW1zLmpvaW4oIl9fXyIpKTsKICAgIH0sCiAgICBsb2FkSW1hZ2U6IGZ1bmN0aW9uIGxvYWRJbWFnZShmb3JtYXQpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB2YXIgdXJsID0gbnVsbDsKCiAgICAgIGlmICh0aGlzLm1ldGFkYXRhICYmIHRoaXMubWV0YWRhdGEubGlua3MgJiYgdGhpcy5tZXRhZGF0YS5saW5rcy5sZW5ndGggPiAwKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1ldGFkYXRhLmxpbmtzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAodGhpcy5tZXRhZGF0YS5saW5rc1tpXS50eXBlID09ICJPUEVOU0VBUkNIX0xJTksiKSB7CiAgICAgICAgICAgIHVybCA9IHRoaXMubWV0YWRhdGEubGlua3NbaV0udXJsOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMudXJsID0gdXJsOwoKICAgICAgaWYgKHVybCA9PSBudWxsKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBjb25zb2xlLmxvZygidXJsICIsIHRoaXMudXJsICsgImRhdGEvdjFfMC90aHVtYm5haWxzP2NvbGxlY3Rpb249IiArIHRoaXMubWV0YWRhdGEuaWQgKyAiJmZvbGRlcj0iICsgZm9ybWF0KTsKICAgICAgdGhpcy5heGlvcyh7CiAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICB1cmw6IHRoaXMudXJsICsgImRhdGEvdjFfMC90aHVtYm5haWxzP2NvbGxlY3Rpb249IiArIHRoaXMubWV0YWRhdGEuaWQgKyAiJmZvbGRlcj0iICsgZm9ybWF0IC8vdXJsOiB0aGlzLnVybCArICIvcmVxdWVzdD9jb2xsZWN0aW9uPSIrdGhpcy5tZXRhZGF0YS5pZCwKCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMzLnllYXJzID0gW107CiAgICAgICAgX3RoaXMzLml0ZW1zID0gW107CiAgICAgICAgX3RoaXMzLml0ZW1zTmFtZSA9IFtdOwogICAgICAgIF90aGlzMy51cmxzID0gW107CiAgICAgICAgY29uc29sZS5sb2coIlJlc3BvbnNlIiwgcmVzcG9uc2UuZGF0YSk7CgogICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCByZXNwb25zZS5kYXRhLmVudHJpZXMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgICBfdGhpczMueWVhcnMucHVzaChyZXNwb25zZS5kYXRhLmVudHJpZXNbX2ldLmRhdGUuc3Vic3RyaW5nKDAsIDQpKTsKICAgICAgICB9CgogICAgICAgIGZvciAodmFyIF9pMiA9IDA7IF9pMiA8IHJlc3BvbnNlLmRhdGEudXJscy5sZW5ndGg7IF9pMisrKSB7CiAgICAgICAgICAvL2xldCBiYXNlNjRTdHJpbmcgPSBCdWZmZXIuZnJvbShTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIG5ldyBVaW50OEFycmF5KHJlc3BvbnNlLmRhdGEudXJsc1tpXS5pbWFnZSkpLCAndXRmOCcpLnRvU3RyaW5nKCdiYXNlNjQnKTsKICAgICAgICAgIC8vdGhpcy5pdGVtcy5wdXNoKCJkYXRhOmltYWdlL2pwZztiYXNlNjQsIiArIGJhc2U2NFN0cmluZyk7CiAgICAgICAgICBfdGhpczMuaXRlbXNOYW1lLnB1c2gocmVzcG9uc2UuZGF0YS51cmxzW19pMl0ubmFtZS5zcGxpdCgiLiIpWzBdKTsKCiAgICAgICAgICBfdGhpczMuaXRlbXMucHVzaCgiZGF0YTppbWFnZS9qcGc7YmFzZTY0LCIgKyByZXNwb25zZS5kYXRhLnVybHNbX2kyXS5pbWFnZSk7CgogICAgICAgICAgX3RoaXMzLnVybHMucHVzaChyZXNwb25zZS5kYXRhLnVybHNbX2kyXS51cmwpOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMzLnBhZ2UgPSAxOwoKICAgICAgICBfdGhpczMuaW5pdFBhZ2UoKTsKCiAgICAgICAgX3RoaXMzLnVwZGF0ZVBhZ2UoX3RoaXMzLnBhZ2UpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAvLyB0aGlzLmRpc3BsYXlFcnJvcigiQW4gZXJyb3IgaGFzIG9jY3VyZWQ6IiArIGVycm9yKQogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":"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","names":["name","data","dataPolicy","years","params","selectedYears","selectedParams","currentStatus","url","urls","page","itemsPages","itemsNamePages","folderFile","items","itemsName","listCount","pageSize","props","language","type","default","theme","primaryColor","secondaryColor","metadata","computed","applyTheme","isVisible","programmaticScrollingTitle","downloadAllowed","pages","watch","value","created","methods","file","initPage","updatePage","pageIndex","_this","download","method","then","self","catch","console","finally","downloadAll","index","window","downloadImage","downloadSelected","loadImage","format"],"sourceRoot":"src/lib/modules/opse-thumbnails-displayed-block","sources":["opse-thumbnails-displayed-block.vue"],"sourcesContent":["<i18n  >\n{\n  \"en\": {\n    \"opseAccessData\": \"Data visualization\",\n    \"opseDownload\": \"Download\",\n    \"explicationText\": \"Select the years you want to download (all years are selected by default).\",\n    \"explicationTextParams\": \"Select the params you want to download (all params are selected by default).\",\n    \"year\": \"Year\",\n    \"param\": \"Parameter\",\n    \"downloadAll\": \"Download All years\",\n    \"downloadSelected\": \"Download selected years\",\n    \"opseAlert\":\"No data available yet.\"        \n\n  },\n  \"fr\": {\n    \"opseAccessData\": \"Visualisation des données\",\n    \"opseDownload\": \"Téléchargement\",\n    \"explicationText\": \"Selectionnez les années que vous voulez télécharger (toutes les années sont sélectionées par défaut).\",\n    \"explicationTextParams\": \"Selectionnez les paramètres que vous voulez télécharger (tous les paramètres sont sélectionés par défaut).\",\n    \"year\": \"Année\",\n    \"param\": \"Parametre\",\n    \"downloadAll\": \"Télécharger\",\n    \"downloadSelected\": \"Télécharger la sélection\",\n    \"opseAlert\":\"Aucune donnée n'est encore disponible.\"\n    \n\n  }\n}\n</i18n>\n\n<template>\n  <div>\n    <v-card v-if=\"isVisible\" :style=\"applyTheme\" :flat=\"true\">\n      <v-card-title>\n        <v-icon large left style=\"color: #f39c12\">mdi-database</v-icon>\n        <span>{{ $t(\"opseAccessData\") }}</span>\n      </v-card-title>\n      <p>Select Data format</p>\n      <v-radio-group v-model=\"folderFile\" column>\n        <v-radio\n          label=\"RGB\"\n          value=\"/thumbnails/tiff/RGB\"\n          @click=\"loadImage(folderFile)\"\n        ></v-radio>\n        <v-radio\n          label=\"MS\"\n          value=\"/thumbnails/tiff/MS\"\n          @click=\"loadImage(folderFile)\"\n        ></v-radio>\n        <v-radio\n          label=\"MNE\"\n          value=\"/thumbnails/tiff/MNE\"\n          @click=\"loadImage(folderFile)\"\n        ></v-radio>\n      </v-radio-group>\n      <div>\n        <v-row height=\"900px\">\n          <v-col\n            v-for=\"(item, index) in itemsPages\"\n            :key=\"index\"\n            class=\"d-flex child-flex\"\n            cols=\"6\"\n          >\n            <v-dialog transition=\"dialog-bottom-transition\" max-width=\"700\">\n              <template v-slot:activator=\"{ on, attrs }\">\n                <v-card class=\"mx-auto my-auto\" max-width=\"374\">\n                  <center>\n                    <v-img\n                      color=\"primary\"\n                      v-bind=\"attrs\"\n                      v-on=\"on\"\n                      :src=\"item\"\n                      height=\"270\"\n                      width=\"270\"\n                    ></v-img>\n                    <v-card-title class=\"justify-center\">\n                      {{ itemsNamePages[index] }}\n                      <v-btn class=\"ma-2\" color=\"indigo\" dark @click=\"downloadImage(urls[index])\">\n                        <v-icon dark> mdi-cloud-download </v-icon>\n                      </v-btn>\n                    </v-card-title>\n                  </center>\n                </v-card>\n              </template>\n\n              <template v-slot:default=\"dialog\">\n                <v-card>\n                  <v-img\n                    :src=\"itemsPages[index]\"\n                    color=\"primary\"\n                    v-bind=\"attrs\"\n                    v-on=\"on\"\n                  ></v-img>\n                  <v-card-actions class=\"justify-end\">\n                    <v-btn class=\"ma-2\" color=\"indigo\" dark @click=\"downloadImage(urls[index])\">\n                      <v-icon dark> mdi-cloud-download </v-icon>\n                    </v-btn>\n                    <v-btn text @click=\"dialog.value = false\">Close</v-btn>\n                  </v-card-actions>\n                </v-card>\n              </template>\n            </v-dialog>\n          </v-col>\n        </v-row>\n      </div>\n      <div class=\"text-center\">\n        <v-pagination\n          class=\"pagination mb-2\"\n          v-model=\"page\"\n          :length=\"pages\"\n          @input=\"updatePage\"\n        ></v-pagination>\n      </div>\n\n      <p>To download the data files, you should agree with the Data Policy.</p>\n      <!--p v-if=\"downloadAllowed\"> No data availaible</p-->\n      <v-alert v-if=\"downloadAllowed\" dense outlined type=\"error\">{{\n        $t(\"opseAlert\")\n      }}</v-alert>\n      <p>\n        <v-checkbox\n          v-model=\"dataPolicy\"\n          label=\"I agree with the Data Policy\"\n          hide-details\n          :disabled=\"downloadAllowed\"\n        ></v-checkbox>\n      </p>\n\n      <span class=\"explication\">{{ $t(\"explicationText\") }}</span>\n      <article>\n        <v-btn-toggle\n          v-model=\"selectedYears\"\n          color=\"primary\"\n          group\n          multiple\n          class=\"d-flex align-center flex-row flex-wrap\"\n        >\n          <v-btn\n            v-for=\"(year, index) in years\"\n            :key=\"index\"\n            :value=\"year\"\n            text\n            :disabled=\"!dataPolicy\"\n          >\n            <section>\n              <div class=\"label-year font-weight-thin rounded-5\">\n                {{ $t(\"year\") }}\n              </div>\n              <div class=\"font-weight-black\">\n                {{ year }}\n              </div>\n            </section>\n          </v-btn>\n        </v-btn-toggle>\n      </article>\n\n      <v-btn\n        color=\"warning\"\n        class=\"ma-4\"\n        @click=\"downloadAll(folderFile)\"\n        :disabled=\"!url || downloadAllowed || !dataPolicy\"\n        >{{ $t(\"downloadAll\") }}</v-btn\n      >\n      <v-btn\n        color=\"warning\"\n        class=\"ma-4\"\n        @click=\"downloadSelected(folderFile)\"\n        :disabled=\"!url || selectedYears.length == 0 || downloadAllowed\"\n        >{{ $t(\"downloadSelected\") }}</v-btn\n      >\n    </v-card>\n  </div>\n</template>\n\n<script>\nimport { applyPrimaryAndSecondaryColors } from \"../../utils\";\nexport default {\n  name: \"opse-thumbnails-displayed-block\",\n\n  data() {\n    return {\n      dataPolicy: false,\n      years: [],\n      params: [],\n      selectedYears: [],\n      selectedParams: [],\n      currentStatus: \"PREPARING_REQUEST\",\n      url: null,\n      urls: [],\n      page: 1,\n      itemsPages: [],\n      itemsNamePages: [],\n      folderFile: \"/thumbnails/tiff/RGB\",\n      items: [],\n      itemsName: [],\n      listCount: 0,\n      pageSize: 4,\n    };\n  },\n\n  props: {\n    language: {\n      type: String,\n      default: \"en\",\n    },\n    theme: {\n      type: Object,\n      default: () => {\n        return {\n          primaryColor: \"#F39C12\",\n          secondaryColor: \"#AAA\",\n        };\n      },\n    },\n\n    metadata: {\n      type: Object,\n      default: () => {\n        return {};\n      },\n    },\n  },\n\n  computed: {\n    applyTheme() {\n      return applyPrimaryAndSecondaryColors(this.theme);\n    },\n\n    isVisible() {\n      let isVisible = false;\n      if (this.url != null) {\n        isVisible = true;\n      }\n\n      this.$emit(\"getVisibility\", {\n        name: this.$options.name,\n        programmaticScrollingTitle: this.$t(\"opseDownload\"),\n        isVisible,\n      });\n      return isVisible;\n    },\n\n    downloadAllowed() {\n      if ((this.years && this.years.length > 0) || this.items) {\n        return false;\n      }\n      return true;\n    },\n    pages() {\n      let _this = this;\n      if (_this.pageSize == null || _this.listCount == null) return 0;\n      return Math.ceil(_this.listCount / _this.pageSize);\n    },\n  },\n\n  watch: {\n    metadata() {\n      this.loadImage();\n    },\n    language(value) {\n      this.$i18n.locale = value;\n    },\n  },\n\n  created() {\n    this.$i18n.locale = this.language;\n    //this.loadImage()\n    this.file();\n    this.initPage();\n    this.updatePage(this.page);\n  },\n\n  methods: {\n    file() {\n      this.loadImage(this.folderFile);\n    },\n\n    initPage() {\n      this.listCount = this.items.length;\n      if (this.listCount < this.pageSize) {\n        this.itemsPages = this.items;\n        this.itemsNamePages = this.itemsName;\n      } else {\n        this.itemsPages = this.items.slice(0, this.pageSize);\n        this.itemsNamePages = this.itemsName.slice(0, this.pageSize);\n      }\n    },\n    updatePage(pageIndex) {\n      let _this = this;\n      let _start = (pageIndex - 1) * _this.pageSize;\n      let _end = pageIndex * _this.pageSize;\n      _this.itemsPages = _this.items.slice(_start, _end);\n      _this.itemsNamePages = _this.itemsName.slice(_start, _end);\n      _this.page = pageIndex;\n    },\n\n    download(url) {\n      this.currentStatus = \"PREPARING_REQUEST\";\n      let self = this;\n      this.downloadDialog = true;\n      this.axios({\n        method: \"get\",\n        url: url,\n      })\n        .then((response) => {\n          self.requestId = response.data;\n          /*self.checker = setInterval(() => {\n            self.checkDownload(self.metadata.id,self.requestId);\n           }, 5000);*/\n        })\n        .catch((error) => {\n          // debugger\n          //self.clearChecker();\n          self.displayError(\"An error has occured:\" + error);\n          console.log(error);\n        })\n        .finally(() => {\n          this.loading = false;\n        });\n    },\n\n    downloadAll(index) {\n      //this.download(this.url+\"download?collectionId=\"+this.metadata.id)\n      window.open(\n        this.url +\n          \"data/v1_0/download?collectionId=\" +\n          this.metadata.id +\n          \"&folder=\" +\n          index\n      );\n    },\n    downloadImage(index) {\n      //this.download(this.url+\"download?collectionId=\"+this.metadata.id)\n      window.open(\n        this.url +\n          \"data/v1_0/downloadImg?collectionId=\" +\n          this.metadata.id +\n          \"&image=\" +\n          index\n      );\n    },\n\n    downloadSelected(index) {\n      window.open(\n        this.url +\n          \"data/v1_0/downloadYear?collectionId=\" +\n          this.metadata.id +\n          \"&folder=\" +\n          index +\n          \"&filter=year___\" +\n          this.selectedYears.join(\"___\") +\n          \"____parameter___\" +\n          this.selectedParams.join(\"___\")\n      );\n    },\n\n    loadImage(format) {\n      let url = null;\n      if (\n        this.metadata &&\n        this.metadata.links &&\n        this.metadata.links.length > 0\n      ) {\n        for (let i = 0; i < this.metadata.links.length; i++) {\n          if (this.metadata.links[i].type == \"OPENSEARCH_LINK\") {\n            url = this.metadata.links[i].url;\n            break;\n          }\n        }\n      }\n      this.url = url;\n      if (url == null) {\n        return;\n      }\n\n      this.loading = true;\n      console.log(\n        \"url \",\n        this.url +\n          \"data/v1_0/thumbnails?collection=\" +\n          this.metadata.id +\n          \"&folder=\" +\n          format\n      );\n      this.axios({\n        method: \"get\",\n        url:\n          this.url +\n          \"data/v1_0/thumbnails?collection=\" +\n          this.metadata.id +\n          \"&folder=\" +\n          format,\n        //url: this.url + \"/request?collection=\"+this.metadata.id,\n      })\n        .then((response) => {\n          this.years = [];\n          this.items = [];\n          this.itemsName = [];\n          this.urls = []\n          console.log(\"Response\", response.data);\n\n          for (let i = 0; i < response.data.entries.length; i++) {\n            this.years.push(response.data.entries[i].date.substring(0, 4));\n          }\n          for (let i = 0; i < response.data.urls.length; i++) {\n            //let base64String = Buffer.from(String.fromCharCode.apply(null, new Uint8Array(response.data.urls[i].image)), 'utf8').toString('base64');\n            //this.items.push(\"data:image/jpg;base64,\" + base64String);\n            this.itemsName.push(response.data.urls[i].name.split(\".\")[0]);\n            this.items.push(\n              \"data:image/jpg;base64,\" + response.data.urls[i].image\n            );\n            this.urls.push(response.data.urls[i].url);\n          }\n          this.page = 1;\n          this.initPage();\n          this.updatePage(this.page);\n        })\n        .catch((error) => {\n          // this.displayError(\"An error has occured:\" + error)\n          console.log(error);\n        })\n        .finally(() => {\n          this.loading = false;\n        });\n    },\n  },\n};\n</script>\n0"]}]}
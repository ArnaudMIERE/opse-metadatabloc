{"remainingRequest":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/babel-loader/lib/index.js!/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/src/lib/modules/opse-download-block/opse-download-block.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/src/lib/modules/opse-download-block/opse-download-block.vue","mtime":1644331050199},{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/babel.config.js","mtime":1644331050195},{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGFwcGx5UHJpbWFyeUFuZFNlY29uZGFyeUNvbG9ycyB9IGZyb20gIi4uLy4uL3V0aWxzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJvcHNlLWRvd25sb2FkLWJsb2NrIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHt9OwogIH0sCiAgcHJvcHM6IHsKICAgIGxhbmd1YWdlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogImVuIgogICAgfSwKICAgIHRoZW1lOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHByaW1hcnlDb2xvcjogIiNGMzlDMTIiLAogICAgICAgICAgc2Vjb25kYXJ5Q29sb3I6ICIjQUFBIgogICAgICAgIH07CiAgICAgIH0KICAgIH0sCiAgICBzZXJ2aWNlOiBudWxsLAogICAgZG93bmxvYWRVcmw6IG51bGwsCiAgICBtZXRhZGF0YTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7fTsKICAgICAgfQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGFwcGx5VGhlbWU6IGZ1bmN0aW9uIGFwcGx5VGhlbWUoKSB7CiAgICAgIHJldHVybiBhcHBseVByaW1hcnlBbmRTZWNvbmRhcnlDb2xvcnModGhpcy50aGVtZSk7CiAgICB9LAogICAgaXNWaXNpYmxlOiBmdW5jdGlvbiBpc1Zpc2libGUoKSB7CiAgICAgIHZhciBpc1Zpc2libGUgPSBmYWxzZTsKCiAgICAgIGlmICh0aGlzLmxpbmtzICE9IG51bGwgJiYgdGhpcy5saW5rcy5sZW5ndGggPiAwKSB7CiAgICAgICAgaXNWaXNpYmxlID0gdHJ1ZTsKICAgICAgfQoKICAgICAgdGhpcy4kZW1pdCgiZ2V0VmlzaWJpbGl0eSIsIHsKICAgICAgICBuYW1lOiB0aGlzLiRvcHRpb25zLm5hbWUsCiAgICAgICAgcHJvZ3JhbW1hdGljU2Nyb2xsaW5nVGl0bGU6IHRoaXMuJHQoIm9wc2VEb3dubG9hZCIpLAogICAgICAgIGlzVmlzaWJsZTogaXNWaXNpYmxlCiAgICAgIH0pOwogICAgICByZXR1cm4gaXNWaXNpYmxlOwogICAgfSwKICAgIGxpbmtzOiBmdW5jdGlvbiBsaW5rcygpIHsKICAgICAgdmFyIGxpbmtzID0gW107CgogICAgICBpZiAodGhpcy5tZXRhZGF0YSAmJiB0aGlzLm1ldGFkYXRhLmxpbmtzICYmIHRoaXMubWV0YWRhdGEubGlua3MubGVuZ3RoID4gMCkgewogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tZXRhZGF0YS5saW5rcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgaWYgKHRoaXMubWV0YWRhdGEubGlua3NbaV0udHlwZSA9PSAnSFRUUF9ET1dOTE9BRF9MSU5LJykgewogICAgICAgICAgICBsaW5rcy5wdXNoKHRoaXMubWV0YWRhdGEubGlua3NbaV0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGxpbmtzOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGxhbmd1YWdlOiBmdW5jdGlvbiBsYW5ndWFnZSh2YWx1ZSkgewogICAgICB0aGlzLiRpMThuLmxvY2FsZSA9IHZhbHVlOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuJGkxOG4ubG9jYWxlID0gdGhpcy5sYW5ndWFnZTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGRvd25sb2FkOiBmdW5jdGlvbiBkb3dubG9hZCh1cmwpIHsKICAgICAgd2luZG93Lm9wZW4odXJsKTsKICAgIH0sCiAgICBkb3dubG9hZEJ1dHRvblRpdGxlOiBmdW5jdGlvbiBkb3dubG9hZEJ1dHRvblRpdGxlKGxpbmspIHsKICAgICAgdmFyIHRpdGxlID0gdGhpcy4kdCgib3BzZURvd25sb2FkIik7CgogICAgICBpZiAobGluay5kZXNjcmlwdGlvbikgewogICAgICAgIHRpdGxlID0gbGluay5kZXNjcmlwdGlvblt0aGlzLmxhbmd1YWdlXTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRpdGxlOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACAA,6BADA;AAGAC,MAHA,kBAGA;AACA;AAGA,GAPA;AAUAC;AACAC;AACAC,kBADA;AAEAC;AAFA,KADA;AAKAC;AACAF,kBADA;AAEAC;AACA;AACAE,iCADA;AAEAC;AAFA;AAGA;AANA,KALA;AAaAC,iBAbA;AAcAC,qBAdA;AAeAC;AACAP,kBADA;AAEAC;AACA;AACA;AAJA;AAfA,GAVA;AAkCAO;AACAC,cADA,wBACA;AACA;AACA,KAHA;AAKAC,aALA,uBAKA;AACA;;AACA;AACAA;AACA;;AACA;AACAd,gCADA;AAEAe,2DAFA;AAGAD;AAHA;AAKA;AACA,KAhBA;AAkBAE,SAlBA,mBAkBA;AACA;;AACA;AACA;AACA;AACAA;AACA;AACA;AACA;;AACA;AACA;AA5BA,GAlCA;AAiEAC;AACAd,YADA,oBACAe,KADA,EACA;AACA;AACA;AAHA,GAjEA;AAuEAC,SAvEA,qBAuEA;AACA;AACA,GAzEA;AA6EAC;AACAC,YADA,oBACAC,GADA,EACA;AACAC;AACA,KAHA;AAKAC,uBALA,+BAKAC,IALA,EAKA;AACA;;AACA;AACAC;AACA;;AACA;AACA;AAXA;AA7EA","names":["name","data","props","language","type","default","theme","primaryColor","secondaryColor","service","downloadUrl","metadata","computed","applyTheme","isVisible","programmaticScrollingTitle","links","watch","value","created","methods","download","url","window","downloadButtonTitle","link","title"],"sourceRoot":"src/lib/modules/opse-download-block","sources":["opse-download-block.vue"],"sourcesContent":["<i18n  >\n{\n  \"en\": {\n    \"opseDownload\": \"Download\",\n    \"opseAccessData\": \"Data access\"\n  },\n  \"fr\": {\n    \"opseDownload\": \"Télécharger\",\n    \"opseAccessData\": \"Accès aux données\"\n  }\n}\n</i18n>\n\n<template>\n\n<v-card v-if=\"isVisible\" :style=\"applyTheme\" :flat=\"true\">\n  <v-card-title>\n    <v-icon large left style=\"color:#F39C12\">mdi-database</v-icon>\n    <span>{{ $t('opseAccessData') }}</span>\n  </v-card-title>\n  <div v-for=\"(link, index)  in links\" :key=\"index\" >\n    <v-btn color=\"warning\" class=\"ma-4\" @click=\"download(link.url)\">\n    <v-icon left>mdi-cloud-download</v-icon>{{ downloadButtonTitle(link) }}\n  </v-btn>\n  </div>\n\n</v-card>\n    \n</template>\n\n<script>\nimport { applyPrimaryAndSecondaryColors } from \"../../utils\";\nexport default {\n    name: \"opse-download-block\",\n\n    data(){\n        return{\n\n        }\n    },\n\n\n    props: {\n    language: {\n      type: String,\n      default: \"en\"\n    },\n    theme: {\n      type: Object,\n      default: () => {\n        return {        \n        primaryColor: \"#F39C12\",\n        secondaryColor: \"#AAA\"};\n      }\n    },\n    service: null,\n    downloadUrl: null,\n    metadata: {\n      type: Object,\n      default: () => {\n        return {};\n      }\n    },\n    \n  },\n\n  computed: {\n    applyTheme() {\n      return applyPrimaryAndSecondaryColors(this.theme);\n    },\n\n    isVisible() {\n        let isVisible = false\n        if(this.links != null && this.links.length > 0) {\n            isVisible = true\n        }\n        this.$emit(\"getVisibility\", {\n        name: this.$options.name,\n        programmaticScrollingTitle: this.$t(\"opseDownload\"),\n        isVisible\n        });\n        return isVisible;\n    },\n\n    links() {\n        let links = []\n        if(this.metadata && this.metadata.links && this.metadata.links.length > 0) {\n            for(let i=0 ; i < this.metadata.links.length ; i++) {\n                if(this.metadata.links[i].type == 'HTTP_DOWNLOAD_LINK') {\n                    links.push(this.metadata.links[i])\n                }\n            }\n        }\n        return links\n    },\n  },\n\n  watch: {\n    language(value) {\n      this.$i18n.locale = value;\n    }\n  },\n\n  created() {\n   this.$i18n.locale = this.language;\n  },\n\n  \n\n  methods: {\n    download(url){\n      window.open(url)\n    },\n\n    downloadButtonTitle(link) {\n      let title = this.$t(\"opseDownload\")\n      if(link.description) {\n        title = link.description[this.language]\n      }\n      return title\n    },\n\n  },\n    \n}\n</script>"]}]}
{"remainingRequest":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/babel-loader/lib/index.js!/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/src/lib/modules/opse-datasetname-block/opse-datasetname-block.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/src/lib/modules/opse-datasetname-block/opse-datasetname-block.vue","mtime":1644331050199},{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/babel.config.js","mtime":1644331050195},{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgQWVyaXNNZXRhZGF0YUxheW91dCBmcm9tICIuLi9hZXJpcy1tZXRhZGF0YS11aS9hZXJpcy1tZXRhZGF0YS1sYXlvdXQvYWVyaXMtbWV0YWRhdGEtbGF5b3V0LnZ1ZSI7CmltcG9ydCBBZXJpc01ldGFkYXRhRGlhbG9nTGF5b3V0IGZyb20gIi4uL2FlcmlzLW1ldGFkYXRhLXVpL2FlcmlzLW1ldGFkYXRhLWxheW91dC9hZXJpcy1tZXRhZGF0YS1kaWFsb2ctbGF5b3V0LnZ1ZSI7CmltcG9ydCB7IGFwcGx5UHJpbWFyeUFuZFNlY29uZGFyeUNvbG9ycywgZm9ybWF0RWRpdGVkRGF0YSwgYmFkUGF0Y2hUb1JlbW92ZVBhcmFncmFwaFRhZyB9IGZyb20gIi4uLy4uL3V0aWxzIjsKaW1wb3J0IGNsb25lRGVlcCBmcm9tICJsb2Rhc2gvY2xvbmVEZWVwIjsKaW1wb3J0IG1hcmtlZCBmcm9tICJtYXJrZWQiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ29wc2UtZGF0YXNldG5hbWUtYmxvY2snLAogIGNvbXBvbmVudHM6IHsKICAgIEFlcmlzTWV0YWRhdGFMYXlvdXQ6IEFlcmlzTWV0YWRhdGFMYXlvdXQsCiAgICBBZXJpc01ldGFkYXRhRGlhbG9nTGF5b3V0OiBBZXJpc01ldGFkYXRhRGlhbG9nTGF5b3V0CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNEaXNwbGF5aW5nRGlhbG9nRWRpdGlvbkZvcm06IGZhbHNlLAogICAgICBlZGl0ZWREZXNjcmlwdGlvbnM6IG51bGwsCiAgICAgIGlzRm9ybVZhbGlkOiB0cnVlLAogICAgICBkaWFsb2c6IGZhbHNlLAogICAgICB0ZXh0QXJlYVJ1bGVzOiBbZnVuY3Rpb24gKHYpIHsKICAgICAgICByZXR1cm4gISF2IHx8ICJDb250ZW50IGlzIHJlcXVpcmVkIjsKICAgICAgfV0KICAgIH07CiAgfSwKICBwcm9wczogewogICAgbGFuZ3VhZ2U6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAiZW4iCiAgICB9LAogICAgdGhlbWU6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgcHJpbWFyeUNvbG9yOiAiI0YzOUMxMiIsCiAgICAgICAgICBzZWNvbmRhcnlDb2xvcjogIiNBQUEiCiAgICAgICAgfTsKICAgICAgfQogICAgfSwKICAgIHNlcnZpY2U6IG51bGwsCiAgICBkb3dubG9hZFVybDogbnVsbCwKICAgIG1ldGFkYXRhOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CiAgICB9LAogICAgbWFya2Rvd246IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIGlzRWRpdGlvbkFsbG93ZWQ6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBhcHBseVRoZW1lOiBmdW5jdGlvbiBhcHBseVRoZW1lKCkgewogICAgICByZXR1cm4gYXBwbHlQcmltYXJ5QW5kU2Vjb25kYXJ5Q29sb3JzKHRoaXMudGhlbWUpOwogICAgfSwKICAgIGlzVmlzaWJsZTogZnVuY3Rpb24gaXNWaXNpYmxlKCkgewogICAgICB2YXIgaXNWaXNpYmxlID0gdGhpcy5pc0VkaXRpb25BbGxvd2VkIHx8ICEhdGhpcy5nZXRSZXNvdXJjZURhdGFzZXROYW1lczsKICAgICAgdGhpcy4kZW1pdCgiZ2V0VmlzaWJpbGl0eSIsIHsKICAgICAgICBuYW1lOiB0aGlzLiRvcHRpb25zLm5hbWUsCiAgICAgICAgcHJvZ3JhbW1hdGljU2Nyb2xsaW5nVGl0bGU6IHRoaXMuJHQoIm9wc2VEYXRhc2V0TmFtZSIpLAogICAgICAgIGlzVmlzaWJsZTogaXNWaXNpYmxlCiAgICAgIH0pOwogICAgICByZXR1cm4gaXNWaXNpYmxlOwogICAgfSwKICAgIGNhblNob3dFZGl0SWNvbjogZnVuY3Rpb24gY2FuU2hvd0VkaXRJY29uKCkgewogICAgICByZXR1cm4gdGhpcy5pc0VkaXRpb25BbGxvd2VkICYmICF0aGlzLmlzRGlzcGxheWluZ0RpYWxvZ0VkaXRpb25Gb3JtOwogICAgfSwKICAgIGNhbkRpc3BsYXlFZGl0aW9uRm9ybTogZnVuY3Rpb24gY2FuRGlzcGxheUVkaXRpb25Gb3JtKCkgewogICAgICByZXR1cm4gdGhpcy5pc0VkaXRpb25BbGxvd2VkICYmIHRoaXMuaXNEaXNwbGF5aW5nRGlhbG9nRWRpdGlvbkZvcm07CiAgICB9LAogICAgbWV0YWRhdGFMYW5ndWFnZTogZnVuY3Rpb24gbWV0YWRhdGFMYW5ndWFnZSgpIHsKICAgICAgaWYgKHRoaXMubWV0YWRhdGEpIHsKICAgICAgICBpZiAodGhpcy5tZXRhZGF0YS5sYW5ndWFnZSkgewogICAgICAgICAgcmV0dXJuIHRoaXMubWV0YWRhdGEubGFuZ3VhZ2U7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5sYW5ndWFnZTsKICAgIH0sCiAgICBnZXRSZXNvdXJjZURhdGFzZXROYW1lOiBmdW5jdGlvbiBnZXRSZXNvdXJjZURhdGFzZXROYW1lKCkgewogICAgICB2YXIgYXV4ID0gdGhpcy5nZXRSZXNvdXJjZURhdGFzZXROYW1lczsKICAgICAgdmFyIHJlc3VsdCA9IGF1eFt0aGlzLmxhbmd1YWdlXTsKCiAgICAgIGlmICghcmVzdWx0IHx8IHJlc3VsdC50cmltKCkubGVuZ3RoID09IDApIHsKICAgICAgICByZXR1cm4gYXV4W3RoaXMubWV0YWRhdGFMYW5ndWFnZV07CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9LAogICAgZ2V0UmVzb3VyY2VEYXRhc2V0TmFtZXM6IGZ1bmN0aW9uIGdldFJlc291cmNlRGF0YXNldE5hbWVzKCkgewogICAgICB2YXIgcmVzb3VyY2VEYXRhc2V0TmFtZSA9IGNsb25lRGVlcCh0aGlzLm1ldGFkYXRhLnJlc291cmNlRGF0YXNldE5hbWUpOwoKICAgICAgaWYgKHJlc291cmNlRGF0YXNldE5hbWUpIHsKICAgICAgICBpZiAodGhpcy5tYXJrZG93bikgewogICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiByZXNvdXJjZURhdGFzZXROYW1lKSB7CiAgICAgICAgICAgIGlmIChyZXNvdXJjZURhdGFzZXROYW1lLmhhc093blByb3BlcnR5KGl0ZW0pKSB7CiAgICAgICAgICAgICAgcmVzb3VyY2VEYXRhc2V0TmFtZVtpdGVtXSA9IG1hcmtlZCh0aGlzLmFkZFNwYWNlcyhyZXNvdXJjZURhdGFzZXROYW1lW2l0ZW1dKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiByZXNvdXJjZURhdGFzZXROYW1lOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGxhbmd1YWdlOiBmdW5jdGlvbiBsYW5ndWFnZSh2YWx1ZSkgewogICAgICB0aGlzLiRpMThuLmxvY2FsZSA9IHZhbHVlOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuJGkxOG4ubG9jYWxlID0gdGhpcy5sYW5ndWFnZTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFkZFNwYWNlczogZnVuY3Rpb24gYWRkU3BhY2VzKHZhbHVlKSB7CiAgICAgIHZhciBhdXggPSB2YWx1ZS5yZXBsYWNlKC8jL2csICIjICIpOwogICAgICBhdXggPSBhdXgucmVwbGFjZSgvIyAjL2csICIjIyIpOwogICAgICBhdXggPSBhdXgucmVwbGFjZSgvIyAjL2csICIjIyIpOwogICAgICByZXR1cm4gYXV4OwogICAgfSwKICAgIGRpc3BsYXlFZGl0aW9uRm9ybTogZnVuY3Rpb24gZGlzcGxheUVkaXRpb25Gb3JtKCkgewogICAgICBpZiAoIXRoaXMubWV0YWRhdGEucmVzb3VyY2VEYXRhc2V0TmFtZSkgewogICAgICAgIHRoaXMuJHNldCh0aGlzLm1ldGFkYXRhLCAicmVzb3VyY2VEYXRhc2V0TmFtZSIsIHsKICAgICAgICAgIGVuOiAiIiwKICAgICAgICAgIGZyOiAiIgogICAgICAgIH0pOwogICAgICB9CgogICAgICB0aGlzLmVkaXRlZERlc2NyaXB0aW9ucyA9IGNsb25lRGVlcCh0aGlzLm1ldGFkYXRhLnJlc291cmNlRGF0YXNldE5hbWUpOwogICAgICBiYWRQYXRjaFRvUmVtb3ZlUGFyYWdyYXBoVGFnKHRoaXMuZWRpdGVkRGVzY3JpcHRpb25zKTsKICAgICAgdGhpcy5pc0Rpc3BsYXlpbmdEaWFsb2dFZGl0aW9uRm9ybSA9IHRydWU7CiAgICB9LAogICAgc2F2ZU1vZGlmaWNhdGlvbnM6IGZ1bmN0aW9uIHNhdmVNb2RpZmljYXRpb25zKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpKSB7CiAgICAgICAgT2JqZWN0LmtleXModGhpcy5lZGl0ZWREZXNjcmlwdGlvbnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgX3RoaXMubWV0YWRhdGEucmVzb3VyY2VEYXRhc2V0TmFtZVtrZXldID0gX3RoaXMuZWRpdGVkRGVzY3JpcHRpb25zW2tleV07CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGZvcm1hdGVkRWRpdGVkRGF0YSA9IGZvcm1hdEVkaXRlZERhdGEoInJlc291cmNlRGF0YXNldE5hbWUiLCB0aGlzLm1ldGFkYXRhLnJlc291cmNlRGF0YXNldE5hbWUpOwogICAgICAgIHRoaXMuJGVtaXQoInNlbmRFZGl0ZWREYXRhIiwgZm9ybWF0ZWRFZGl0ZWREYXRhKTsKICAgICAgICB0aGlzLmhpZGVGb3JtKCk7CiAgICAgIH0KICAgIH0sCiAgICBoaWRlRm9ybTogZnVuY3Rpb24gaGlkZUZvcm0oKSB7CiAgICAgIHRoaXMuZWRpdGVkRGVzY3JpcHRpb25zID0gbnVsbDsKICAgICAgdGhpcy5pc0Rpc3BsYXlpbmdEaWFsb2dFZGl0aW9uRm9ybSA9IGZhbHNlOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;AACA;AACA;AACA;AACA;AACAA,gCADA;AAGAC;AACAC,4CADA;AAEAC;AAFA,GAHA;AAQAC,MARA,kBAQA;AACA;AACAC,0CADA;AAEAC,8BAFA;AAGAC,uBAHA;AAIAC,mBAJA;AAKAC;AAAA;AAAA;AALA;AAQA,GAjBA;AAmBAC;AACAC;AACAC,kBADA;AAEAC;AAFA,KADA;AAKAC;AACAF,kBADA;AAEAC;AACA;AACAE,iCADA;AAEAC;AAFA;AAGA;AANA,KALA;AAaAC,iBAbA;AAcAC,qBAdA;AAeAC;AACAP,kBADA;AAEAC;AACA;AACA;AAJA,KAfA;AAsBAO;AACAR,mBADA;AAEAC;AAFA,KAtBA;AA2BAQ;AACAT,mBADA;AAEAC;AAFA;AA3BA,GAnBA;AAqDAS;AACAC,cADA,wBACA;AACA;AACA,KAHA;AAKAC,aALA,uBAKA;AACA;AACA;AACAxB,gCADA;AAEAyB,8DAFA;AAGAD;AAHA;AAKA;AACA,KAbA;AAgBAE,mBAhBA,6BAgBA;AACA;AACA,KAlBA;AAmBAC,yBAnBA,mCAmBA;AACA;AACA,KArBA;AAuBAC,oBAvBA,8BAuBA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA,KA9BA;AAiCAC,0BAjCA,oCAiCA;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA,KAxCA;AA0CAC,2BA1CA,qCA0CA;AACA;;AACA;AACA;AACA;AACA;AACAC,iDACA,yCADA;AAGA;AACA;AACA;AACA;;AACA;AACA;AAxDA,GArDA;AAgHAC;AACArB,YADA,oBACAsB,KADA,EACA;AACA;AACA;AAHA,GAhHA;AAsHAC,SAtHA,qBAsHA;AACA;AACA,GAxHA;AA4HAC;AAEAC,aAFA,qBAEAH,KAFA,EAEA;AACA;AACAI;AACAA;AACA;AACA,KAPA;AAUAC,sBAVA,gCAUA;AACA;AACA;AAAAC;AAAAC;AAAA;AACA;;AACA;AACAC;AACA;AACA,KAjBA;AAmBAC,qBAnBA,+BAmBA;AAAA;;AACA;AACAC;AACA;AACA,SAFA;AAGA,kDACA,qBADA,EAEA,iCAFA;AAIA;AACA;AACA;AACA,KA/BA;AAiCAC,YAjCA,sBAiCA;AACA;AACA;AACA;AApCA;AA5HA","names":["name","components","AerisMetadataLayout","AerisMetadataDialogLayout","data","isDisplayingDialogEditionForm","editedDescriptions","isFormValid","dialog","textAreaRules","props","language","type","default","theme","primaryColor","secondaryColor","service","downloadUrl","metadata","markdown","isEditionAllowed","computed","applyTheme","isVisible","programmaticScrollingTitle","canShowEditIcon","canDisplayEditionForm","metadataLanguage","getResourceDatasetName","getResourceDatasetNames","resourceDatasetName","watch","value","created","methods","addSpaces","aux","displayEditionForm","en","fr","badPatchToRemoveParagraphTag","saveModifications","Object","hideForm"],"sourceRoot":"src/lib/modules/opse-datasetname-block","sources":["opse-datasetname-block.vue"],"sourcesContent":["<i18n  >\n{\n  \"en\": {\n    \"opseDatasetName\": \"Dataset name\",\n    \"en\": \"English\",\n    \"fr\": \"French\"\n    \n  },\n  \"fr\": {\n    \"opseDatasetName\": \"Nom du jeu de données\",\n    \"en\": \"Anglais\",\n    \"fr\": \"Français\"\n    \n  }\n}\n</i18n>\n<template>\n  <aeris-metadata-layout\n    v-if=\"isVisible\"\n    :title=\"$t('opseDatasetName')\"\n    :theme=\"theme\"\n    :canDisplayEditIcon=\"canShowEditIcon\"\n    :displayInFlat=\"true\"\n    icon=\"mdi-file\"\n    @edit=\"displayEditionForm()\"\n  >\n  <div v-if=\"metadata.resourceDatasetName\" v-html=\"getResourceDatasetName\"></div>\n  <aeris-metadata-dialog-layout\n    v-if=\"canDisplayEditionForm\"\n    max-width=\"800px\"\n    :is-displaying-dialog=\"isDisplayingDialogEditionForm\"\n    :disable-save-button=\"!isFormValid\"\n    :title=\"$t('opseDatasetName')\"\n    @cancel=\"hideForm()\"\n    @save-modifications=\"saveModifications()\"\n  >\n  <template v-slot:dialog-contents>\n        <v-form ref=\"form\" v-model=\"isFormValid\">\n          <v-tabs>\n            <v-tab\n              v-for=\"(language, index) in Object.keys(metadata.resourceDatasetName)\"\n              :key=\"index\"\n            >{{ $t(language) }}</v-tab>\n            <v-tab-item\n              v-for=\"(language, index) in Object.keys(metadata.resourceDatasetName)\"\n              :key=\"index\"\n            >\n              <v-textarea\n              class=\"pt-2\"\n                v-model=\"editedDescriptions[language]\"\n                outlined\n                hide-details=\"auto\"\n                height=\"650px\"\n                :required=\"language === 'en'\"\n                :rules=\"language === 'en' ? textAreaRules : []\"\n                :label=\"language === 'en' ? 'mandatory' : 'optional'\"\n              ></v-textarea>\n            </v-tab-item>\n          </v-tabs>\n        </v-form>\n      </template>\n  </aeris-metadata-dialog-layout>\n\n  </aeris-metadata-layout>\n</template>\n\n<script>\nimport AerisMetadataLayout from \"../aeris-metadata-ui/aeris-metadata-layout/aeris-metadata-layout.vue\"\nimport AerisMetadataDialogLayout from \"../aeris-metadata-ui/aeris-metadata-layout/aeris-metadata-dialog-layout.vue\";\nimport { applyPrimaryAndSecondaryColors, formatEditedData, badPatchToRemoveParagraphTag } from \"../../utils\";\nimport cloneDeep from \"lodash/cloneDeep\";\nimport marked from \"marked\"\nexport default {\n  name: 'opse-datasetname-block',\n\n  components: {\n    AerisMetadataLayout,\n    AerisMetadataDialogLayout\n  },\n\n  data() {\n    return {\n      isDisplayingDialogEditionForm: false,\n      editedDescriptions:null,\n      isFormValid: true,\n      dialog:false,\n      textAreaRules: [v => !!v || \"Content is required\"],\n\n    }\n  },\n\n  props: {\n    language: {\n      type: String,\n      default: \"en\"\n    },\n    theme: {\n      type: Object,\n      default: () => {\n        return {        \n        primaryColor: \"#F39C12\",\n        secondaryColor: \"#AAA\"};\n      }\n    },\n    service: null,\n    downloadUrl: null,\n    metadata: {\n      type: Object,\n      default: () => {\n        return {};\n      }\n    },\n\n    markdown:{\n      type: Boolean,\n      default: true\n    },\n\n    isEditionAllowed:{\n      type: Boolean,\n      default: false\n    }\n    \n  },\n\n  computed: {\n    applyTheme() {\n      return applyPrimaryAndSecondaryColors(this.theme);\n    },\n\n    isVisible() {\n      const isVisible = this.isEditionAllowed || !!this.getResourceDatasetNames;\n      this.$emit(\"getVisibility\", {\n        name: this.$options.name,\n        programmaticScrollingTitle: this.$t(\"opseDatasetName\"),\n        isVisible\n      });\n      return isVisible;\n    },\n\n   \n    canShowEditIcon() {\n      return this.isEditionAllowed && !this.isDisplayingDialogEditionForm;\n    },\n    canDisplayEditionForm() {\n      return this.isEditionAllowed && this.isDisplayingDialogEditionForm;\n    },\n\n    metadataLanguage(){\n      if (this.metadata){\n        if (this.metadata.language){\n          return this.metadata.language\n        }\n      }\n      return this.language\n    },\n\n   \n    getResourceDatasetName(){\n      let aux = this.getResourceDatasetNames;\n      let result = aux[this.language];\n      if ((!result) || (result.trim().length ==0)){\n        return aux[this.metadataLanguage]\n      }\n      return result;\n    },\n    \n    getResourceDatasetNames() {\n      const resourceDatasetName = cloneDeep(this.metadata.resourceDatasetName);\n      if (resourceDatasetName) {\n        if (this.markdown) {\n          for (let item in resourceDatasetName) {\n            if (resourceDatasetName.hasOwnProperty(item)) {\n              resourceDatasetName[item] = marked(\n                this.addSpaces(resourceDatasetName[item])\n              );\n            }\n          }\n        }\n      }\n      return resourceDatasetName;\n    }\n  },\n\n  watch: {\n    language(value) {\n      this.$i18n.locale = value;\n    }\n  },\n\n  created() {\n   this.$i18n.locale = this.language;\n  },\n\n  \n\n  methods: {\n    \n    addSpaces(value) {\n      let aux = value.replace(/#/g, \"# \");\n      aux = aux.replace(/# #/g, \"##\");\n      aux = aux.replace(/# #/g, \"##\");\n      return aux;\n    },\n  \n\n  displayEditionForm() {\n      if (!this.metadata.resourceDatasetName) {\n        this.$set(this.metadata, \"resourceDatasetName\", {en: \"\", fr: \"\"})\n      }\n      this.editedDescriptions = cloneDeep(this.metadata.resourceDatasetName);\n      badPatchToRemoveParagraphTag(this.editedDescriptions);\n      this.isDisplayingDialogEditionForm = true;\n    },\n\n  saveModifications() {\n      if (this.$refs.form.validate()) {\n        Object.keys(this.editedDescriptions).forEach(key => {\n          this.metadata.resourceDatasetName[key] = this.editedDescriptions[key];\n        });\n        const formatedEditedData = formatEditedData(\n          \"resourceDatasetName\",\n          this.metadata.resourceDatasetName\n        );\n        this.$emit(\"sendEditedData\", formatedEditedData);\n        this.hideForm();\n      }\n    },\n\n    hideForm() {\n      this.editedDescriptions = null;\n      this.isDisplayingDialogEditionForm = false;\n    }\n  \n},\n  \n}\n</script>\n\n<style scoped>\n.theme--light.v-btn.v-btn--icon{\n  color: rgba(0,0,0,.54);\n}\n.theme--light.v-icon {\n    color: var(--primaryColor);\n}\ntheme--light.v-btn {\n  color: var(--primaryColor);\n}\n\n</style>\n"]}]}
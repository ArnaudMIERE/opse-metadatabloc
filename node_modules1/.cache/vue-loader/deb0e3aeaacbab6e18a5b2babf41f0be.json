{"remainingRequest":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/src/lib/modules/opse-download-block/opse-download-block.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/src/lib/modules/opse-download-block/opse-download-block.vue","mtime":1644331050199},{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGFwcGx5UHJpbWFyeUFuZFNlY29uZGFyeUNvbG9ycyB9IGZyb20gIi4uLy4uL3V0aWxzIjsKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIm9wc2UtZG93bmxvYWQtYmxvY2siLAoKICAgIGRhdGEoKXsKICAgICAgICByZXR1cm57CgogICAgICAgIH0KICAgIH0sCgoKICAgIHByb3BzOiB7CiAgICBsYW5ndWFnZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICJlbiIKICAgIH0sCiAgICB0aGVtZTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6ICgpID0+IHsKICAgICAgICByZXR1cm4geyAgICAgICAgCiAgICAgICAgcHJpbWFyeUNvbG9yOiAiI0YzOUMxMiIsCiAgICAgICAgc2Vjb25kYXJ5Q29sb3I6ICIjQUFBIn07CiAgICAgIH0KICAgIH0sCiAgICBzZXJ2aWNlOiBudWxsLAogICAgZG93bmxvYWRVcmw6IG51bGwsCiAgICBtZXRhZGF0YTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6ICgpID0+IHsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0KICAgIH0sCiAgICAKICB9LAoKICBjb21wdXRlZDogewogICAgYXBwbHlUaGVtZSgpIHsKICAgICAgcmV0dXJuIGFwcGx5UHJpbWFyeUFuZFNlY29uZGFyeUNvbG9ycyh0aGlzLnRoZW1lKTsKICAgIH0sCgogICAgaXNWaXNpYmxlKCkgewogICAgICAgIGxldCBpc1Zpc2libGUgPSBmYWxzZQogICAgICAgIGlmKHRoaXMubGlua3MgIT0gbnVsbCAmJiB0aGlzLmxpbmtzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgaXNWaXNpYmxlID0gdHJ1ZQogICAgICAgIH0KICAgICAgICB0aGlzLiRlbWl0KCJnZXRWaXNpYmlsaXR5IiwgewogICAgICAgIG5hbWU6IHRoaXMuJG9wdGlvbnMubmFtZSwKICAgICAgICBwcm9ncmFtbWF0aWNTY3JvbGxpbmdUaXRsZTogdGhpcy4kdCgib3BzZURvd25sb2FkIiksCiAgICAgICAgaXNWaXNpYmxlCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGlzVmlzaWJsZTsKICAgIH0sCgogICAgbGlua3MoKSB7CiAgICAgICAgbGV0IGxpbmtzID0gW10KICAgICAgICBpZih0aGlzLm1ldGFkYXRhICYmIHRoaXMubWV0YWRhdGEubGlua3MgJiYgdGhpcy5tZXRhZGF0YS5saW5rcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGZvcihsZXQgaT0wIDsgaSA8IHRoaXMubWV0YWRhdGEubGlua3MubGVuZ3RoIDsgaSsrKSB7CiAgICAgICAgICAgICAgICBpZih0aGlzLm1ldGFkYXRhLmxpbmtzW2ldLnR5cGUgPT0gJ0hUVFBfRE9XTkxPQURfTElOSycpIHsKICAgICAgICAgICAgICAgICAgICBsaW5rcy5wdXNoKHRoaXMubWV0YWRhdGEubGlua3NbaV0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGxpbmtzCiAgICB9LAogIH0sCgogIHdhdGNoOiB7CiAgICBsYW5ndWFnZSh2YWx1ZSkgewogICAgICB0aGlzLiRpMThuLmxvY2FsZSA9IHZhbHVlOwogICAgfQogIH0sCgogIGNyZWF0ZWQoKSB7CiAgIHRoaXMuJGkxOG4ubG9jYWxlID0gdGhpcy5sYW5ndWFnZTsKICB9LAoKICAKCiAgbWV0aG9kczogewogICAgZG93bmxvYWQodXJsKXsKICAgICAgd2luZG93Lm9wZW4odXJsKQogICAgfSwKCiAgICBkb3dubG9hZEJ1dHRvblRpdGxlKGxpbmspIHsKICAgICAgbGV0IHRpdGxlID0gdGhpcy4kdCgib3BzZURvd25sb2FkIikKICAgICAgaWYobGluay5kZXNjcmlwdGlvbikgewogICAgICAgIHRpdGxlID0gbGluay5kZXNjcmlwdGlvblt0aGlzLmxhbmd1YWdlXQogICAgICB9CiAgICAgIHJldHVybiB0aXRsZQogICAgfSwKCiAgfSwKICAgIAp9Cg=="},{"version":3,"sources":["opse-download-block.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"opse-download-block.vue","sourceRoot":"src/lib/modules/opse-download-block","sourcesContent":["<i18n  >\n{\n  \"en\": {\n    \"opseDownload\": \"Download\",\n    \"opseAccessData\": \"Data access\"\n  },\n  \"fr\": {\n    \"opseDownload\": \"Télécharger\",\n    \"opseAccessData\": \"Accès aux données\"\n  }\n}\n</i18n>\n\n<template>\n\n<v-card v-if=\"isVisible\" :style=\"applyTheme\" :flat=\"true\">\n  <v-card-title>\n    <v-icon large left style=\"color:#F39C12\">mdi-database</v-icon>\n    <span>{{ $t('opseAccessData') }}</span>\n  </v-card-title>\n  <div v-for=\"(link, index)  in links\" :key=\"index\" >\n    <v-btn color=\"warning\" class=\"ma-4\" @click=\"download(link.url)\">\n    <v-icon left>mdi-cloud-download</v-icon>{{ downloadButtonTitle(link) }}\n  </v-btn>\n  </div>\n\n</v-card>\n    \n</template>\n\n<script>\nimport { applyPrimaryAndSecondaryColors } from \"../../utils\";\nexport default {\n    name: \"opse-download-block\",\n\n    data(){\n        return{\n\n        }\n    },\n\n\n    props: {\n    language: {\n      type: String,\n      default: \"en\"\n    },\n    theme: {\n      type: Object,\n      default: () => {\n        return {        \n        primaryColor: \"#F39C12\",\n        secondaryColor: \"#AAA\"};\n      }\n    },\n    service: null,\n    downloadUrl: null,\n    metadata: {\n      type: Object,\n      default: () => {\n        return {};\n      }\n    },\n    \n  },\n\n  computed: {\n    applyTheme() {\n      return applyPrimaryAndSecondaryColors(this.theme);\n    },\n\n    isVisible() {\n        let isVisible = false\n        if(this.links != null && this.links.length > 0) {\n            isVisible = true\n        }\n        this.$emit(\"getVisibility\", {\n        name: this.$options.name,\n        programmaticScrollingTitle: this.$t(\"opseDownload\"),\n        isVisible\n        });\n        return isVisible;\n    },\n\n    links() {\n        let links = []\n        if(this.metadata && this.metadata.links && this.metadata.links.length > 0) {\n            for(let i=0 ; i < this.metadata.links.length ; i++) {\n                if(this.metadata.links[i].type == 'HTTP_DOWNLOAD_LINK') {\n                    links.push(this.metadata.links[i])\n                }\n            }\n        }\n        return links\n    },\n  },\n\n  watch: {\n    language(value) {\n      this.$i18n.locale = value;\n    }\n  },\n\n  created() {\n   this.$i18n.locale = this.language;\n  },\n\n  \n\n  methods: {\n    download(url){\n      window.open(url)\n    },\n\n    downloadButtonTitle(link) {\n      let title = this.$t(\"opseDownload\")\n      if(link.description) {\n        title = link.description[this.language]\n      }\n      return title\n    },\n\n  },\n    \n}\n</script>"]}]}
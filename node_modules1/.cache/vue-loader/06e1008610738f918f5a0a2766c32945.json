{"remainingRequest":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/src/lib/modules/opse-images-displayed-block/opse-images-displayed-block.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/src/lib/modules/opse-images-displayed-block/opse-images-displayed-block.vue","mtime":1644931879509},{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/openopse/Documents/GitHub/Catalogue Sedoo/projets/opse-metadatabloc/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGFwcGx5UHJpbWFyeUFuZFNlY29uZGFyeUNvbG9ycyB9IGZyb20gIi4uLy4uL3V0aWxzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJvcHNlLWltYWdlcy1kaXNwbGF5ZWQtYmxvY2siLAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2l6ZSA6IDQsCiAgICAgIGRhdGFQb2xpY3k6IGZhbHNlLAogICAgICBjdXJyZW50U3RhdHVzOiAiUFJFUEFSSU5HX1JFUVVFU1QiLAogICAgICBpbWFnZTogMCwKICAgICAgeWVhcnM6IFtdLAogICAgICBpbWFnZXM6W10KICAgIH07CiAgfSwKCiAgcHJvcHM6IHsKICAgIGxhbmd1YWdlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogImVuIiwKICAgIH0sCiAgICB0aGVtZTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6ICgpID0+IHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgcHJpbWFyeUNvbG9yOiAiI0YzOUMxMiIsCiAgICAgICAgICBzZWNvbmRhcnlDb2xvcjogIiNBQUEiLAogICAgICAgIH07CiAgICAgIH0sCiAgICB9LAoKICAgIG1ldGFkYXRhOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogKCkgPT4gewogICAgICAgIHJldHVybiB7fTsKICAgICAgfSwKICAgIH0sCiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIGFwcGx5VGhlbWUoKSB7CiAgICAgIHJldHVybiBhcHBseVByaW1hcnlBbmRTZWNvbmRhcnlDb2xvcnModGhpcy50aGVtZSk7CiAgICB9LAoKICAgIGlzVmlzaWJsZSgpIHsKICAgICAgbGV0IGlzVmlzaWJsZSA9IGZhbHNlOwogICAgICBpZiAodGhpcy51cmwgIT0gbnVsbCkgewogICAgICAgIGlzVmlzaWJsZSA9IHRydWU7CiAgICAgIH0KCiAgICAgIHRoaXMuJGVtaXQoImdldFZpc2liaWxpdHkiLCB7CiAgICAgICAgbmFtZTogdGhpcy4kb3B0aW9ucy5uYW1lLAogICAgICAgIHByb2dyYW1tYXRpY1Njcm9sbGluZ1RpdGxlOiB0aGlzLiR0KCJvcHNlRG93bmxvYWQiKSwKICAgICAgICBpc1Zpc2libGUsCiAgICAgIH0pOwogICAgICByZXR1cm4gaXNWaXNpYmxlOwogICAgfSwKICB9LAoKICB3YXRjaDogewogICAgbWV0YWRhdGEoKSB7CiAgICAgIHRoaXMubG9hZFBob3RvcygpOwogICAgfSwKICAgIGxhbmd1YWdlKHZhbHVlKSB7CiAgICAgIHRoaXMuJGkxOG4ubG9jYWxlID0gdmFsdWU7CiAgICB9LAogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLiRpMThuLmxvY2FsZSA9IHRoaXMubGFuZ3VhZ2U7CiAgICB0aGlzLmZpbGUoKTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBmaWxlKCkgewogICAgICB0aGlzLmxvYWRQaG90b3ModGhpcy5mb2xkZXJGaWxlKTsKICAgIH0sCgogICAgbG9hZFBob3RvcygpIHsKICAgICAgbGV0IHVybCA9IG51bGw7CiAgICAgIGlmICgKICAgICAgICB0aGlzLm1ldGFkYXRhICYmCiAgICAgICAgdGhpcy5tZXRhZGF0YS5saW5rcyAmJgogICAgICAgIHRoaXMubWV0YWRhdGEubGlua3MubGVuZ3RoID4gMAogICAgICApIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWV0YWRhdGEubGlua3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGlmICh0aGlzLm1ldGFkYXRhLmxpbmtzW2ldLnR5cGUgPT0gIk9QRU5TRUFSQ0hfTElOSyIpIHsKICAgICAgICAgICAgdXJsID0gdGhpcy5tZXRhZGF0YS5saW5rc1tpXS51cmw7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLnVybCA9IHVybDsKICAgICAgaWYgKHVybCA9PSBudWxsKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBjb25zb2xlLmxvZygKICAgICAgICAidXJsICIsCiAgICAgICAgdGhpcy51cmwgKwogICAgICAgICAgImRhdGEvdjFfMC9waG90b3M/Y29sbGVjdGlvbj0iICsKICAgICAgICAgIHRoaXMubWV0YWRhdGEuaWQKICAgICAgKTsKICAgICAgdGhpcy5heGlvcyh7CiAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICB1cmw6CiAgICAgICAgICB0aGlzLnVybCArCiAgICAgICAgICAiZGF0YS92MV8wL3Bob3Rvcz9jb2xsZWN0aW9uPSIgKwogICAgICAgICAgdGhpcy5tZXRhZGF0YS5pZAogICAgICAgIC8vdXJsOiB0aGlzLnVybCArICIvcmVxdWVzdD9jb2xsZWN0aW9uPSIrdGhpcy5tZXRhZGF0YS5pZCwKICAgICAgfSkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMueWVhcnMgPSBbXTsKICAgICAgICAgIHRoaXMuaW1hZ2VzID0gW107CiAgICAgICAgICB0aGlzLnNpemU9MDsKICAgICAgICAgIGNvbnNvbGUubG9nKCJSZXNwb25zZSIsIHJlc3BvbnNlLmRhdGEpOwoKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzcG9uc2UuZGF0YS5lbnRyaWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHRoaXMuc2l6ZSA9IHJlc3BvbnNlLmRhdGEuZW50cmllcy5sZW5ndGggLTE7CiAgICAgICAgICAgIHRoaXMueWVhcnMucHVzaChyZXNwb25zZS5kYXRhLmVudHJpZXNbaV0uZGF0ZS5zdWJzdHJpbmcoMCwgNCkpOwogICAgICAgICAgICB0aGlzLmltYWdlcy5wdXNoKCJkYXRhOmltYWdlL2pwZztiYXNlNjQsIityZXNwb25zZS5kYXRhLmVudHJpZXNbaV0uaW1hZ2UpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgLy8gdGhpcy5kaXNwbGF5RXJyb3IoIkFuIGVycm9yIGhhcyBvY2N1cmVkOiIgKyBlcnJvcikKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB9KQogICAgICAgIC5maW5hbGx5KCgpID0+IHsKICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["opse-images-displayed-block.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"opse-images-displayed-block.vue","sourceRoot":"src/lib/modules/opse-images-displayed-block","sourcesContent":["<i18n  >\n{\n  \"en\": {\n    \"opseAccessData\": \"Data access\",\n    \"opseDisplayedImg\": \"Data displayed Image\",\n    \"opseDownload\": \"Download\",\n    \"explicationText\": \"Select the years you want to download (all years are selected by default).\",\n    \"explicationTextParams\": \"Select the params you want to download (all params are selected by default).\",\n    \"year\": \"Year\",\n    \"param\": \"Parameter\",\n    \"downloadAll\": \"Download All years\",\n    \"downloadSelected\": \"Download selected years\",\n    \"opseAlert\":\"No data available yet.\"        \n\n  },\n  \"fr\": {\n    \"opseAccessData\": \"Accès aux données\",\n    \"opseDisplayedImg\": \"Affichage des données\",\n    \"opseDownload\": \"Téléchargement\",\n    \"explicationText\": \"Selectionnez les années que vous voulez télécharger (toutes les années sont sélectionées par défaut).\",\n    \"explicationTextParams\": \"Selectionnez les paramètres que vous voulez télécharger (tous les paramètres sont sélectionés par défaut).\",\n    \"year\": \"Année\",\n    \"param\": \"Parametre\",\n    \"downloadAll\": \"Télécharger\",\n    \"downloadSelected\": \"Télécharger la sélection\",\n    \"opseAlert\":\"Aucune donnée n'est encore disponible.\"\n    \n\n  }\n}\n</i18n>\n\n<template>\n  <div>\n    <v-card v-if=\"isVisible\" :style=\"applyTheme\" :flat=\"true\">\n      <v-card-title>\n        <!-- <v-icon large left style=\"color: #f39c12\">mdi-database</v-icon> -->\n        <span>{{ $t(\"opseDisplayedImg\") }}</span>\n      </v-card-title>\n\n      <article>\n        <v-card\n        class=\"mx-auto my-auto\"\n            max-width=\"500\"\n        >\n          <v-subheader>Tick labels</v-subheader>\n\n          <v-card-text>\n            <v-slider\n              v-model=\"image\"\n              :max=\"size\"\n              step=\"1\"\n              ticks=\"always\"\n              persistent-hint\n              thumb-label=\"always\"\n            >\n              <template v-slot:thumb-label=\"{ value }\">\n                {{ years[value] }}\n              </template>\n            </v-slider>\n            <v-img :src=\"images[image]\"> </v-img>\n          </v-card-text>\n        </v-card>\n      </article>\n    </v-card>\n  </div>\n</template>\n\n<script>\nimport { applyPrimaryAndSecondaryColors } from \"../../utils\";\nexport default {\n  name: \"opse-images-displayed-block\",\n\n  data() {\n    return {\n      size : 4,\n      dataPolicy: false,\n      currentStatus: \"PREPARING_REQUEST\",\n      image: 0,\n      years: [],\n      images:[]\n    };\n  },\n\n  props: {\n    language: {\n      type: String,\n      default: \"en\",\n    },\n    theme: {\n      type: Object,\n      default: () => {\n        return {\n          primaryColor: \"#F39C12\",\n          secondaryColor: \"#AAA\",\n        };\n      },\n    },\n\n    metadata: {\n      type: Object,\n      default: () => {\n        return {};\n      },\n    },\n  },\n\n  computed: {\n    applyTheme() {\n      return applyPrimaryAndSecondaryColors(this.theme);\n    },\n\n    isVisible() {\n      let isVisible = false;\n      if (this.url != null) {\n        isVisible = true;\n      }\n\n      this.$emit(\"getVisibility\", {\n        name: this.$options.name,\n        programmaticScrollingTitle: this.$t(\"opseDownload\"),\n        isVisible,\n      });\n      return isVisible;\n    },\n  },\n\n  watch: {\n    metadata() {\n      this.loadPhotos();\n    },\n    language(value) {\n      this.$i18n.locale = value;\n    },\n  },\n\n  created() {\n    this.$i18n.locale = this.language;\n    this.file();\n  },\n\n  methods: {\n    file() {\n      this.loadPhotos(this.folderFile);\n    },\n\n    loadPhotos() {\n      let url = null;\n      if (\n        this.metadata &&\n        this.metadata.links &&\n        this.metadata.links.length > 0\n      ) {\n        for (let i = 0; i < this.metadata.links.length; i++) {\n          if (this.metadata.links[i].type == \"OPENSEARCH_LINK\") {\n            url = this.metadata.links[i].url;\n            break;\n          }\n        }\n      }\n      this.url = url;\n      if (url == null) {\n        return;\n      }\n\n      this.loading = true;\n      console.log(\n        \"url \",\n        this.url +\n          \"data/v1_0/photos?collection=\" +\n          this.metadata.id\n      );\n      this.axios({\n        method: \"get\",\n        url:\n          this.url +\n          \"data/v1_0/photos?collection=\" +\n          this.metadata.id\n        //url: this.url + \"/request?collection=\"+this.metadata.id,\n      })\n        .then((response) => {\n          this.years = [];\n          this.images = [];\n          this.size=0;\n          console.log(\"Response\", response.data);\n\n          for (let i = 0; i < response.data.entries.length; i++) {\n            this.size = response.data.entries.length -1;\n            this.years.push(response.data.entries[i].date.substring(0, 4));\n            this.images.push(\"data:image/jpg;base64,\"+response.data.entries[i].image);\n          }\n        })\n        .catch((error) => {\n          // this.displayError(\"An error has occured:\" + error)\n          console.log(error);\n        })\n        .finally(() => {\n          this.loading = false;\n        });\n    },\n  },\n};\n</script>\n"]}]}